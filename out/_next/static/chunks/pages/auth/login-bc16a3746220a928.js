(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{2505:function(e,a,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return o(2733)}])},2733:function(e,a,o){"use strict";o.r(a),o.d(a,{default:function(){return q}});var t=o(5893),r=o(7294),n=o(3156),s=o(6720),i=o(5616),l=o(5861),c=o(6705),d=o(5707),u=o(1752),m=o.n(u),h=o(5121),v=o(1955),g=o(1444);function p(e,a,o){let t={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"".concat(e)};return(()=>{switch(o){case"success":g.Am.success("".concat(a),t);break;case"warning":g.Am.warning("".concat(a),t);break;case"info":g.Am.info("".concat(a),t);break;case"error":g.Am.error("".concat(a),t);break;default:(0,g.Am)("".concat(a),t)}})()}o(8128);let{publicRuntimeConfig:f}=m()(),w="".concat(f.baseURL);h.Z.create({baseURL:w}).interceptors.request.use(e=>{let a=v.Z.get("auth-token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});var b=o(6310),x=o(7533);let{publicRuntimeConfig:k}=m()(),y="".concat(k.apiUrl),Z={login:async e=>{try{return await h.Z.post("".concat(y).concat("api/login"),e).then(async e=>{var a,o;console.log(e);let t=await (null==e?void 0:e.data),r=null==t?void 0:null===(a=t.body)||void 0===a?void 0:a.token,n=JSON.stringify(null==t?void 0:null===(o=t.body)||void 0===o?void 0:o.auth);return v.Z.set("auth-token",r),localStorage.setItem("profile",n),{data:t,status:null==e?void 0:e.status}})}catch(e){!function(e){var a,o,t,r;switch(console.log(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.data),null==e?void 0:e.status){case 400:p("colored","".concat(null==e?void 0:null===(o=e.data)||void 0===o?void 0:o.message),"error");break;case 401:case 403:p("colored","".concat(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message),"error"),setTimeout(function(){history.back(),window.location.href="",v.Z.remove("auth-token")});break;case 404:p("colored","Not Found","error");break;case 422:Object.keys(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.errors).forEach(a=>{var o;p("colored","".concat(null==e?void 0:null===(o=e.data)||void 0===o?void 0:o.errors[a][0]),"error")});break;case 500:case 501:case 503:p("colored","Server Error","error"),console.log(e);break;default:return}}(null==e?void 0:e.response)}},logoutHandler:()=>{v.Z.remove("auth-token")}};var _=o(1163),j=o(7536),E=o(5675),A=o.n(E);function q(){var e,a,o,u,m,h;let g=(0,_.useRouter)();(0,r.useEffect)(()=>{v.Z.get("auth-token")&&g.push("/")},[]);let[f,w]=(0,r.useState)({email:"",password:""}),k=function(){let e=arguments,a={};for(let o of e)switch(o){case"login":a.login=b.Z_().required("Email is required").email();break;case"email":a.email=b.Z_().required("Email is required").email();break;case"password":a.password=b.Z_().required("Password is required").matches(/^[^\u0600-\u06FF]*$/,"Sorry, the password cannot contain Arabic characters.").max(128,"Must not be greater than 128 characters").min(6,"Password must be at least 6 characters")}return{resolver:(0,x.X)(b.Ry().shape(a))}}("email","password"),{register:y,handleSubmit:E,formState:q}=(0,j.cI)(k),{errors:C}=q,P=async e=>{let a=await Z.login(e);(null==a?void 0:a.status)===200&&(p("colored","".concat((null==a?void 0:a.message)||"Logged in success"),"success"),await g.push("/"))};return(0,t.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},component:"main",maxWidth:"xs",children:[(0,t.jsx)(s.ZP,{}),(0,t.jsxs)(i.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"start"},children:[(0,t.jsx)(A(),{src:"/assets/images/svg/logo-black.svg",alt:"Description of the image",fill:1,loading:"lazy",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",zIndex:"-1",maxWidth:"737px",opacity:".025"}}),(0,t.jsx)(l.Z,{component:"h1",variant:"h5",sx:{textAlign:"start",fontWeight:"bold",mt:3},children:"Log in"}),(0,t.jsx)(l.Z,{component:"p",sx:{textAlign:"start"},children:"Welcome back! Please enter your details."}),(0,t.jsxs)(i.Z,{component:"form",onSubmit:E(P),noValidate:!0,sx:{mt:1},children:[(0,t.jsx)(c.Z,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,...y("email"),helperText:C.email&&(null===(e=C.email)||void 0===e?void 0:e.message)||(null===(a=f.email)||void 0===a?void 0:a.length)>0&&f.email[0],error:(C.email||(null===(o=f.email)||void 0===o?void 0:o.length)>0)&&!0}),(0,t.jsx)(c.Z,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",...y("password"),helperText:C.password&&(null===(u=C.password)||void 0===u?void 0:u.message)||(null===(m=f.login)||void 0===m?void 0:m.length)>0&&f.password[0],error:(C.password||(null===(h=f.password)||void 0===h?void 0:h.length)>0)&&!0}),(0,t.jsx)(d.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,bgcolor:"primary.mainDark"},children:"Sign In"})]})]})]})}},8128:function(){}},function(e){e.O(0,[810,888,774,179],function(){return e(e.s=2505)}),_N_E=e.O()}]);